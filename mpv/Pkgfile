# Description: General Purpose video player based on MPlayer and mplayer2
# URL:         http://mpv.io
# Maintainer:  Maximilian Dietrich, dxm <at> lavabit <dot> com
# Depends on:  xorg-libx11 libjpeg libass ffmpeg alsa-lib freetype fribidi docutils zlib
# Nice to have: libquvi libdvdread

name=mpv
version=2013-07-31
release=2
source=(https://raw.github.com/Doomicide/crux-ports/master/distfiles/$name-$version.tar.gz)

build () {
	cd "$name-$version"

	# contrib's libdvdread is too old to be detected automatically
	if [[ ! -z $(pkg-config --list-all | grep dvdread) ]]; then
		dvdsupport="--extra-libs=-ldvdread --extra-cflags=-I/usr/include/dvdread --enable-dvdread"
	else
		dvdsupport=""
	
	fi
	# custom CFLAGS LDFLAGS might break the build
	unset CFLAGS LDFLAGS
	./configure --prefix=/usr --mandir=/usr/man $dvdsupport
	
	make
	make DESTDIR=$PKG \
	install
}
